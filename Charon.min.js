var Charon=function(setupObject){for(var key in setupObject)eval("Charon.prototype."+key+" = setupObject. "+key);return Charon.prototype};Charon.prototype={url:"",file:"",additionalData:"",outputDebugging:!1,loadStartCallback:null,progressCallback:null,abortCallback:null,errorCallback:null,loadCallback:null,timeoutCallback:null,loadEndCallback:null,readyStateChangeCallback:null,debug:function(o){this.outputDebugging&&console.log(o)},callbackIsSet:function(o){var t=!1;return void 0!==o&&""!==o&&null!==o&&(t=!0),t},isTraversable:function(o){return this.debug(Object.prototype.toString(o)),this.debug(o),"[object Array]"===Object.prototype.toString(o)||"[object Object]"===Object.prototype.toString(o)},sendFile:function(){if(""===this.url)throw new Error("No URL set.  Cannot continue");var o=new FormData;if(this.isTraversable(this.additionalData))for(key in this.additionalData)void 0!==this.additionalData[key]&&o.append(key,this.additionalData[key]);else this.debug("additionaData is not an array");try{var t=this.file.files[0];o.append("charonFile",t)}catch(a){throw new Error("No file set for upload.  Cannot continue")}var r=new XMLHttpRequest;r.open("POST",this.url,!0),r.addEventListener("loadstart",this.charonLoadStart),r.addEventListener("progress",this.charonProgress),r.addEventListener("abort",this.charonAbort),r.addEventListener("error",this.charonError),r.addEventListener("load",this.charonLoad),r.addEventListener("timeout",this.charonTimeOut),r.addEventListener("loadend",this.charonLoadEnd),r.addEventListener("readystatechange",this.charonReadyStateChange),r.send(o)},charonLoadStart:function(o){Charon.prototype.debug("running loadStart"),Charon.prototype.callbackIsSet(Charon.prototype.loadStartCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.loadStartCallback),Charon.prototype.debug(typeof Charon.prototype.loadStartCallback),"function"==typeof Charon.prototype.loadStartCallback&&Charon.prototype.loadStartCallback(o))},charonProgress:function(o){Charon.prototype.debug("running progress"),Charon.prototype.callbackIsSet(Charon.prototype.progressCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.progressCallback),Charon.prototype.debug(typeof Charon.prototype.progressCallback),"function"==typeof Charon.prototype.progressCallback&&Charon.prototype.progressCallback(o))},charonAbort:function(o){Charon.prototype.debug("running abort"),Charon.prototype.callbackIsSet(Charon.prototype.abortCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.abortCallback),"function"==typeof Charon.prototype.abortCallback&&Charon.prototype.abortCallback(o))},charonError:function(o){Charon.prototype.debug("running error"),console.log("An error occurred when transferring the file"),console.log(o),Charon.prototype.callbackIsSet(Charon.prototype.errorCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.errorCallback),Charon.prototype.debug(typeof Charon.prototype.errorCallback),"function"==typeof Charon.prototype.errorCallback&&Charon.prototype.errorCallback(o))},charonLoad:function(o){Charon.prototype.debug("running load"),Charon.prototype.callbackIsSet(Charon.prototype.loadCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.loadCallback),Charon.prototype.debug(typeof Charon.prototype.loadCallback),"function"==typeof Charon.prototype.loadCallback&&Charon.prototype.loadCallback(o))},charonTimeOut:function(o){Charon.prototype.debug("running timeout"),Charon.prototype.callbackIsSet(Charon.prototype.timeoutCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.timeoutCallback),Charon.prototype.debug(typeof Charon.prototype.timeoutCallback),"function"==typeof Charon.prototype.timeoutCallback&&Charon.prototype.timeoutCallback(o))},charonLoadEnd:function(o){Charon.prototype.debug("running loadend"),Charon.prototype.callbackIsSet(Charon.prototype.loadEndCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.loadEndCallback),Charon.prototype.debug(typeof Charon.prototype.loadEndCallback),"function"==typeof Charon.prototype.loadEndCallback&&Charon.prototype.loadEndCallback(o))},charonReadyStateChange:function(o){Charon.prototype.debug("running readystatechange"),Charon.prototype.callbackIsSet(Charon.prototype.readyStateChangeCallback)&&(Charon.prototype.debug("Calling user defined function "+Charon.prototype.readyStateChangeCallback),Charon.prototype.debug(typeof Charon.prototype.readyStateChangeCallback),"function"==typeof Charon.prototype.readyStateChangeCallback&&Charon.prototype.readyStateChangeCallback(o))}};